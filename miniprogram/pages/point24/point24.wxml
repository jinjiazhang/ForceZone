<!--point24.wxml-->
<view class="page-container">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <!-- é¡¶éƒ¨åŠŸèƒ½åŒº -->
  <view class="top-bar">
    <view class="timer-badge" wx:if="{{isPlaying}}">
      <text class="timer-value">{{timerDisplay}}</text>
    </view>
  </view>

  <!-- æ¸¸æˆä¸»åŒºåŸŸ -->
  <view class="game-area">
    <!-- å¼€å§‹å‰çš„æ¬¢è¿ç•Œé¢ -->
    <view class="welcome-section" wx:if="{{!isPlaying && !showResult}}">
      <view class="welcome-card">
        <text class="welcome-title">24</text>
        <view class="welcome-badge"></view>
      </view>
      <button class="start-btn" bindtap="startGame">å¼€å§‹è®­ç»ƒ</button>
    </view>

    <!-- æ¸¸æˆä¸­çš„å€’è®¡æ—¶æç¤º -->
    <view class="countdown-text" wx:if="{{isPlaying && countdownText}}">
      <text class="{{countdownText === 'Go!' ? 'go' : ''}}">{{countdownText}}</text>
    </view>

    <!-- æ•°å­—å¡ç‰‡åŒº -->
    <view class="cards-grid" wx:if="{{isPlaying && !countdownText}}">
      <block wx:for="{{cards}}" wx:key="id">
        <view 
          class="number-card {{selectedCard === item.id ? 'selected' : ''}}"
          wx:if="{{item.visible}}"
          bindtap="onCardTap"
          data-id="{{item.id}}"
        >
          <text class="number-value">{{item.display}}</text>
        </view>
      </block>
    </view>

    <!-- è¿ç®—ç¬¦åŒº -->
    <view class="operator-section" wx:if="{{isPlaying && !countdownText}}">
      <view 
        class="op-btn {{selectedOp === '+' ? 'selected' : ''}}" 
        bindtap="onOperatorTap" 
        data-op="+"
      >+</view>
      <view 
        class="op-btn {{selectedOp === '-' ? 'selected' : ''}}" 
        bindtap="onOperatorTap" 
        data-op="-"
      >âˆ’</view>
      <view 
        class="op-btn {{selectedOp === '*' ? 'selected' : ''}}" 
        bindtap="onOperatorTap" 
        data-op="*"
      >Ã—</view>
      <view 
        class="op-btn {{selectedOp === '/' ? 'selected' : ''}}" 
        bindtap="onOperatorTap" 
        data-op="/"
      >Ã·</view>
    </view>
  </view>

  <!-- åº•éƒ¨æç¤ºæŒ‰é’® -->
  <view class="footer-section" wx:if="{{isPlaying && !countdownText}}">
    <view class="hint-btn" bindtap="onShowHint">
      <text>ğŸ’¡ æç¤º</text>
    </view>
    <view class="undo-btn" bindtap="onUndo">
      <text>â†© æ’¤é”€</text>
    </view>
  </view>

  <!-- æç¤ºå¼¹çª— -->
  <view class="modal-overlay" wx:if="{{showSolution}}" bindtap="onHideHint">
    <view class="modal-content" catchtap="">
      <view class="modal-title">ğŸ’¡ è§£æ³•æç¤º</view>
      <view class="solution-text">{{solution}}</view>
      <view class="modal-btn" bindtap="onHideHint">çŸ¥é“äº†</view>
    </view>
  </view>

  <!-- ç»“æœå¼¹çª— -->
  <view class="modal-overlay" wx:if="{{showResult}}" bindtap="onCloseResult">
    <view class="modal-content result-modal {{resultSuccess ? 'success' : 'fail'}}" catchtap="">
      <view class="result-icon">{{resultSuccess ? 'ğŸ‰' : 'ğŸ˜…'}}</view>
      <view class="result-message">{{resultMessage}}</view>
      <view class="modal-actions">
        <view class="modal-btn" bindtap="onCloseResult">ç¡®å®š</view>
        <view class="modal-btn primary" bindtap="startGame">{{resultSuccess ? 'ä¸‹ä¸€é¢˜' : 'å†è¯•ä¸€æ¬¡'}}</view>
      </view>
    </view>
  </view>
</view>
